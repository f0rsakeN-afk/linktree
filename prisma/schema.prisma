generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Profile {
  id            String   @id @default(cuid())
  name          String
  username      String   @unique
  bio           String?
  avatarUrl     String?
  accessKeyHash String
  backupHash    String
  theme         String   @default("minimal")
  font          String   @default("inter")
  links         Link[]
  blocks        Block[]
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Link {
  id        String   @id @default(cuid())
  profileId String
  profile   Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
  title     String
  url       String
  icon      String?
  order     Int      @default(0)
  createdAt DateTime @default(now())
}

model Block {
  id        String    @id @default(cuid())
  profileId String
  profile   Profile   @relation(fields: [profileId], references: [id], onDelete: Cascade)
  type      BlockType @default(TEXT)
  content   String
  order     Int       @default(0)
  createdAt DateTime  @default(now())
}

enum BlockType {
  TEXT
  HEADING
  QUOTE
  DIVIDER
}
